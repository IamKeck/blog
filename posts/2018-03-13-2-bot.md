---
title: Twitter BOTを作った
---
突然ですが、Twitter Botを作成しました

[\@jsession\_bot](https://twitter.com/jsession_bot) です

## なにこれ
リプライを送ると、ジャズスタンダードの中からランダムで一曲選んでリプライを送信します。
セッションで次なにやろうか迷ったときにでも使ってください。

自動フォローバックするので、鍵垢の人は一旦フォローしてください。

## なんでこんなものを作ろうかと思ったのか？
これがメインです。

もともとこれを作ろうと思ったきっかけは、TwitterのAccount Activity API(Beta)を使ってみたかったからです。
HTTPエンドポイントを登録すると、Twitter側からそのエンドポイントにイベントを投げてくれます。
具体的には、リプライが来た、フォローされた、RTされたなどです。

自分でサーバーを用意して、そこにイベントを投げてもらう形なので、サーバーレスと相性がいいと考えました。
AWSでAPI GatewayとLambdaを組み合わせてなにかしらのリプライに反応するタイプのBOTを作って見ようと思ったのです。

がしかし、Account Activity APIはベータ版だからか、Twitterへの申請&審査が必要でした・・・
一応申請を出してみましたが通る気配もありません・・・

ということで普通にUser Stream API(deprecatedだが・・・)を使って実装する羽目になりました

## どうやって作ったか
Python + tweepyというライブラリを組み合わせて作りました。 tweepyはstream処理にも対応していて、
自分でソケットからのデータの処理などを書かなくてすみました。

ただUser Streamに関してはドキュメントの記述がなかったのでソース読むことになりましたが・・・
まあとても読みやすいソースだったので、ささっと必要な情報は得られました

## 今後どうするか
#### 曲を増やす
現状黒本1の曲しか入れていないので、もっといろんな曲を入れた方がいいかなと思っています

#### なんかタグ付けして、バラードから選ぶとかできるようにする
タグ付けが大変だ・・・

#### Haskellで書き直す
このBOTを何らかの学習用途で使うにはもうこれぐらいしかないんじゃないかと思いました

おわり



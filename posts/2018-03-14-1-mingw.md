---
title: バッチファイルからmingw/msysを使う
---

タイトルからわかる通り、Win限定の話です。
mingw-w64/msys2前提です。

あんまりないかもしれませんが、バッチファイルで行われる処理の一部にmingw/msysを使う処理を挟みたくなった場合の対処法です。
意外と情報がありませんでした。 まあ誰もこんな中途半端なことしないってことですかね・・・

以下のようにします。
何度も呼ぶのも面倒なので、mingw/msysを使う処理はシェルスクリプトにでもくくり出しておけば良いのではないかと思います。
```
call msys2_shell.cmd -no-start -defterm -mingw32(もしくは-mingw64) -here [bashへの引数]
```
[bashへの引数] ですが、シェルスクリプトを実行したい場合はそのままそのスクリプトのパスを、
単一のコマンドを実行したい場合は
```
-c "コマンド"
```
とすれば良いでしょう。

また、この例では、予めmsys2\_shell.cmdがある場所(C:¥mingw32もしくはC:¥mingw64など)にパスを通してします。
通すかフルパスで指定するかはお任せしますが、どちらでも問題ないと思います。

callや-no-start、-deftermをつけ忘れると非同期的に処理が走ってしまい、
処理が完了するのを待たずに次の処理が行われてしまいます。

-hereをつけると、カレントディレクトリがそのままmsysに受け継がれます。 コマンド部分にシェルスクリプトを指定する場合、
これがないとシェルにnot found的に怒られてしまうでしょう。



